---
# Nginx Role Default Variables
# Override these in vars/main.yml or playbook vars

# Package configuration
nginx_package_name: nginx
nginx_package_state: present

# Service configuration
nginx_service_state: started
nginx_service_enabled: true

# Directory paths
nginx_conf_dir: /etc/nginx
nginx_sites_available_dir: /etc/nginx/sites-available
nginx_sites_enabled_dir: /etc/nginx/sites-enabled
nginx_log_dir: /var/log/nginx
nginx_ssl_dir: /etc/nginx/ssl

# User configuration
nginx_user: www-data
nginx_group: www-data

# Worker configuration
nginx_worker_processes: auto
nginx_worker_connections: 1024
nginx_multi_accept: true

# Performance tuning
nginx_sendfile: true
nginx_tcp_nopush: true
nginx_tcp_nodelay: true
nginx_keepalive_timeout: 65
nginx_types_hash_max_size: 2048
nginx_server_tokens: false

# Logging configuration
nginx_access_log: /var/log/nginx/access.log
nginx_error_log: /var/log/nginx/error.log
nginx_log_format: combined

# Gzip compression
nginx_gzip: true
nginx_gzip_vary: true
nginx_gzip_proxied: any
nginx_gzip_comp_level: 6
nginx_gzip_types:
  - text/plain
  - text/css
  - text/xml
  - application/json
  - application/javascript
  - application/xml
  - application/xml+rss
  - application/atom+xml
  - image/svg+xml

# SSL configuration
nginx_ssl_enabled: false
nginx_ssl_protocols: "TLSv1.2 TLSv1.3"
nginx_ssl_ciphers: "ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384"
nginx_ssl_prefer_server_ciphers: true
nginx_ssl_session_cache: "shared:SSL:10m"
nginx_ssl_session_timeout: 1d
nginx_ssl_dhparam: false

# Security headers
nginx_add_security_headers: true
nginx_security_headers:
  X-Frame-Options: SAMEORIGIN
  X-Content-Type-Options: nosniff
  X-XSS-Protection: "1; mode=block"
  Referrer-Policy: strict-origin-when-cross-origin

# Virtual hosts (empty by default)
nginx_vhosts: []

# Example vhost structure:
# nginx_vhosts:
#   - server_name: example.com
#     root: /var/www/example.com
#     index: index.html index.htm
#     listen: 80
#     enabled: true
#     locations:
#       - path: /
#         options:
#           try_files: $uri $uri/ =404
#     ssl_enabled: false

# Firewall configuration
nginx_configure_firewall: false

# Logrotate configuration
nginx_logrotate: true
nginx_logrotate_days: 14

# Remove default site
nginx_remove_default_vhost: true

# Rate limiting
nginx_rate_limiting: false
nginx_rate_limit_zone: "zone=limit:10m rate=10r/s"
nginx_rate_limit_burst: 20

# Proxy configuration (for reverse proxy setups)
nginx_proxy_cache_path: ""
nginx_proxy_temp_path: ""
